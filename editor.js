var Editor=function(){"use strict";function t(t,e){for(var n=[],o=[31,t%100!=0&&t%4==0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e],r=1;r<=o;r++)n.push(r);return n}function e(t,e){for(var n=parseInt(e),o=[],r=-10;r<20;r++)o.push(n+r);return o}function n(t,e){if(!t.startDate)return[];for(var n=Math.max(parseInt(t.startDate.getFullYear()),parseInt(e)),o=[],r=0;r<10;r++)o.push(n+r);return o}function o(e,n,o){return t(n,o)}function r(e,n,o){return t(n,o)}function i(){return{calendar:null,show:!1,mode:"create",entry:{},monthNames:[],months:[0,1,2,3,4,5,6,7,8,9,10,11],newTitleText:"Add New Entry",editTitleText:"Edit Entry"}}function a(t){if(!t)return"";var e=new Date(t);return e.toString().indexOf("nvalid")>-1?"Invalid Date":e.toDateString()}function s(){var t=this.get("calendar"),e=this;this.set({monthNames:t.get("monthNames"),defaultColor:t.get("defaultColor")}),this.clearEntry(),t.on("newClicked",function(t){var n=t.day.date;n.setHours(10),e.set({show:!0,entry:{title:"",dateFrom:n.toISOString().substr(0,10),dateTo:n.toISOString().substr(0,10),color:this.get("defaultColor"),content:""}})}),t.on("editClicked",function(n){n.entry;t.set({showModal:!1}),e.set({show:!0,mode:"edit"})}),t.on("deleteClicked",function(n){var o=n.entry;confirm("Really delete? There is no undo.")&&(e.delete(o),t.set({showModal:!1}))}),t.on("entryClicked",function(n){var o=n.entry;e.set({entry:o}),t.set({modalButtons:[{text:"Edit",id:"editClicked"},{text:"Delete",id:"deleteClicked"}]})}),this.observe("show",function(t){document.querySelector("html").style.overflow=t?"hidden":""})}function l(t){h(t,"svelte-1538435118","")}function c(){var t=p("style");t.id="svelte-1538435118-style",t.textContent='[svelte-1538435118]{font-family:Arial, Helvetica, sans-serif;box-sizing:border-box;-webkit-box-sizing:border-box;font-size:14px}input[svelte-1538435118],textarea[svelte-1538435118]{border:1px solid #ccc;margin-top:0.1rem;margin-bottom:0.1rem;margin-right:0.1rem;padding:0.4rem 0.6rem;font-family:monospace;font-size:14px;color:black;background-color:white}textarea[svelte-1538435118]{min-height:100px}.help[svelte-1538435118]{margin:0.4rem 0;font-size:0.9rem;color:#333;font-style:italic}.button-bar[svelte-1538435118]{margin-top:1rem;display:flex;justify-content:space-between}input[type="color"][svelte-1538435118]{padding:initial;background:white;border:none;width:40px;height:40px}input[type="color"][svelte-1538435118]:hover{cursor:pointer}button[svelte-1538435118]{font-family:Arial, Helvetica, sans-serif;border:1px solid #333;border-radius:3px;padding:0.3rem 0.6rem;background:white;color:black}button[svelte-1538435118]:hover{cursor:pointer;background:#ddd}.field[svelte-1538435118]{display:flex;flex-direction:column;margin-bottom:1rem}.field[svelte-1538435118] label[svelte-1538435118]{margin-bottom:0.2rem;color:#333}.modal[svelte-1538435118]{bottom:0;left:0;right:0;top:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:none;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;position:fixed;z-index:20}.modal.is-active[svelte-1538435118]{display:-webkit-box;display:-ms-flexbox;display:flex}.modal-background[svelte-1538435118]{bottom:0;left:0;position:fixed;right:0;top:0;background-color:rgba(10, 10, 10, 0.86)}.modal-content[svelte-1538435118],.modal-card[svelte-1538435118]{margin:0 20px;max-height:calc(100vh - 100px);overflow:auto;position:relative;width:100%}@media screen and (min-width: 769px),\n  print{.modal-content[svelte-1538435118],.modal-card[svelte-1538435118]{margin:0 auto;max-height:calc(100vh - 40px);width:640px}}.modal-close[svelte-1538435118]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-moz-appearance:none;-webkit-appearance:none;background-color:rgba(10, 10, 10, 0.2);border:none;border-radius:290486px;cursor:pointer;display:inline-block;font-size:1rem;outline:none;vertical-align:top;background:none;height:40px;position:absolute;right:5px;top:5px;width:40px}.modal-close[svelte-1538435118]:before,.modal-close[svelte-1538435118]:after{background-color:#333;content:"";display:block;left:50%;position:absolute;top:50%;-webkit-transform:translateX(-50%) translateY(-50%) rotate(45deg);transform:translateX(-50%) translateY(-50%) rotate(45deg);-webkit-transform-origin:center center;transform-origin:center center}.modal-close[svelte-1538435118]:before{height:2px;width:50%}.modal-close[svelte-1538435118]:after{height:50%;width:2px}.modal-close[svelte-1538435118]:hover,.modal-close[svelte-1538435118]:focus{background-color:rgba(10, 10, 10, 0.3)}.modal-close[svelte-1538435118]:active{background-color:rgba(10, 10, 10, 0.4)}.modal-container[svelte-1538435118]{padding:2rem;background-color:white;border-radius:3px}.modal-title[svelte-1538435118]{display:block;margin-bottom:2rem}.title[svelte-1538435118]{font-weight:600;font-size:1.5rem}',v(t,document.head)}function u(t,e){function n(t){e.set({show:!1})}function o(t){e.set({show:!1})}function r(){bt=!0;var t=e.get();t.entry.title=A.value,e.set({entry:t.entry}),bt=!1}function i(){_t=!0;var t=e.get();t.entry.dateFrom=q.value,e.set({entry:t.entry}),_t=!1}function a(){xt=!0;var t=e.get();t.entry.timeFrom=Q.value,e.set({entry:t.entry}),xt=!1}function s(){wt=!0;var t=e.get();t.entry.dateTo=$.value,e.set({entry:t.entry}),wt=!1}function c(){kt=!0;var t=e.get();t.entry.timeTo=it.value,e.set({entry:t.entry}),kt=!1}function u(){var t=e.get();t.entry.color=ut.value,e.set({entry:t.entry})}function f(){Tt=!0;var t=e.get();t.entry.content=pt.value,e.set({entry:t.entry}),Tt=!1}function w(t){e.submit()}var k,T,C,F,N,D,E,S,I,z,Y,O,B,j,A,H,M,L,X,q,R,G,J,K,P,Q,U,V,W,Z,$,tt,et,nt,ot,rt,it,at,st,lt,ct,ut,dt,mt,ft,ht,pt,vt,yt,gt="create"===t.mode?t.newTitleText:t.editTitleText,bt=!1,_t=!1,xt=!1,wt=!1,kt=!1,Tt=!1,Ct=t.entry.dateFrom&&d(t,e),Ft=t.entry.dateTo&&m(t,e);return{c:function(){k=p("div"),C=p("div"),F=y("\n  "),N=p("div"),D=p("button"),E=y("\n    "),S=p("div"),I=p("span"),z=y(gt),Y=y("\n      "),O=p("div"),(B=p("label")).textContent="Entry Title",j=y("\n        "),A=p("input"),H=y("\n      "),M=p("div"),(L=p("label")).textContent="Date From",X=y("\n        "),q=p("input"),R=y("\n        "),Ct&&Ct.c(),G=y("\n      "),J=p("div"),(K=p("label")).textContent="Time From",P=y("\n        "),Q=p("input"),U=y("\n      "),V=p("div"),(W=p("label")).textContent="Date To",Z=y("\n        "),$=p("input"),tt=y("\n        "),Ft&&Ft.c(),et=y("\n      "),nt=p("div"),(ot=p("label")).textContent="Time To",rt=y("\n        "),it=p("input"),at=y("\n      "),st=p("div"),(lt=p("label")).textContent="Entry Color",ct=y("\n        "),ut=p("input"),dt=y("\n      "),mt=p("div"),(ft=p("label")).textContent="Content",ht=y("\n        "),pt=p("textarea"),vt=y("\n      "),(yt=p("button")).textContent="Submit",this.h()},h:function(){l(k),k.className=T="modal "+(t.show?"is-active":""),l(C),C.className="modal-background",g(C,"click",n),l(N),N.className="modal-content",l(D),D.className="modal-close",h(D,"aria-label","close"),g(D,"click",o),l(S),S.className="modal-container",l(I),I.className="title modal-title",l(O),O.className="field",l(B),l(A),A.id="entry-title",A.placeholder="Enter a short but descriptive title",g(A,"input",r),l(M),M.className="field",l(L),l(q),q.type="date",g(q,"input",i),l(J),J.className="field",l(K),l(Q),Q.type="time",Q.placeholder="optional",g(Q,"input",a),l(V),V.className="field",l(W),l($),$.type="date",g($,"input",s),l(nt),nt.className="field",l(ot),l(it),it.type="time",it.placeholder="optional",g(it,"input",c),l(st),st.className="field",l(lt),l(ut),ut.id="entry-color",ut.type="color",g(ut,"input",u),l(mt),mt.className="field",l(ft),l(pt),g(pt,"input",f),l(yt),yt.className="button",g(yt,"click",w)},m:function(n,o){b(k,n,o),v(C,k),v(F,k),v(N,k),v(D,N),v(E,N),v(S,N),e.refs.modalContent=S,v(I,S),v(z,I),v(Y,S),v(O,S),v(B,O),v(j,O),v(A,O),A.value=t.entry.title,v(H,S),v(M,S),v(L,M),v(X,M),v(q,M),q.value=t.entry.dateFrom,v(R,M),Ct&&Ct.m(M,null),v(G,S),v(J,S),v(K,J),v(P,J),v(Q,J),Q.value=t.entry.timeFrom,v(U,S),v(V,S),v(W,V),v(Z,V),v($,V),$.value=t.entry.dateTo,v(tt,V),Ft&&Ft.m(V,null),v(et,S),v(nt,S),v(ot,nt),v(rt,nt),v(it,nt),it.value=t.entry.timeTo,v(at,S),v(st,S),v(lt,st),v(ct,st),v(ut,st),ut.value=t.entry.color,v(dt,S),v(mt,S),v(ft,mt),v(ht,mt),v(pt,mt),pt.value=t.entry.content,v(vt,S),v(yt,S),e.refs.submitButton=yt},p:function(t,n){t.show&&T!==(T="modal "+(n.show?"is-active":""))&&(k.className=T),(t.mode||t.newTitleText||t.editTitleText)&&gt!==(gt="create"===n.mode?n.newTitleText:n.editTitleText)&&(z.data=gt),bt||(A.value=n.entry.title),_t||(q.value=n.entry.dateFrom),n.entry.dateFrom?Ct?Ct.p(t,n):((Ct=d(n,e)).c(),Ct.m(M,null)):Ct&&(Ct.u(),Ct.d(),Ct=null),xt||(Q.value=n.entry.timeFrom),wt||($.value=n.entry.dateTo),n.entry.dateTo?Ft?Ft.p(t,n):((Ft=m(n,e)).c(),Ft.m(V,null)):Ft&&(Ft.u(),Ft.d(),Ft=null),kt||(it.value=n.entry.timeTo),ut.value=n.entry.color,Tt||(pt.value=n.entry.content)},u:function(){_(k),Ct&&Ct.u(),Ft&&Ft.u()},d:function(){x(C,"click",n),x(D,"click",o),e.refs.modalContent===S&&(e.refs.modalContent=null),x(A,"input",r),x(q,"input",i),Ct&&Ct.d(),x(Q,"input",a),x($,"input",s),Ft&&Ft.d(),x(it,"input",c),x(ut,"input",u),x(pt,"input",f),x(yt,"click",w),e.refs.submitButton===yt&&(e.refs.submitButton=null)}}}function d(t,e){var n,o,r=a(t.entry.dateFrom);return{c:function(){n=p("p"),o=y(r),this.h()},h:function(){l(n),n.className="help"},m:function(t,e){b(n,t,e),v(o,n)},p:function(t,e){t.entry&&r!==(r=a(e.entry.dateFrom))&&(o.data=r)},u:function(){_(n)},d:w}}function m(t,e){var n,o,r=a(t.entry.dateTo);return{c:function(){n=p("p"),o=y(r),this.h()},h:function(){l(n),n.className="help"},m:function(t,e){b(n,t,e),v(o,n)},p:function(t,e){t.entry&&r!==(r=a(e.entry.dateTo))&&(o.data=r)},u:function(){_(n)},d:w}}function f(t){k(this,t),this.refs={},this._state=T(i(),t.data),this._recompute({entry:1,yearFrom:1,monthFrom:1,yearTo:1,monthTo:1},this._state),document.getElementById("svelte-1538435118-style")||c();var e=s.bind(this);t._root?this._root._oncreate.push(e):this._oncreate=[e],this._fragment=u(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),C(this._oncreate))}function h(t,e,n){t.setAttribute(e,n)}function p(t){return document.createElement(t)}function v(t,e){e.appendChild(t)}function y(t){return document.createTextNode(t)}function g(t,e,n){t.addEventListener(e,n,!1)}function b(t,e,n){e.insertBefore(t,n)}function _(t){t.parentNode.removeChild(t)}function x(t,e,n){t.removeEventListener(e,n,!1)}function w(){}function k(t,e){t.options=e,t._observers={pre:D(),post:D()},t._handlers=D(),t._root=e._root||t,t._yield=e._yield,t._bind=e._bind}function T(t){for(var e,n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(e in n)t[e]=n[e]}return t}function C(t){for(;t&&t.length;)t.pop()()}function F(t){this.destroy=w,this.fire("destroy"),this.set=this.get=w,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function N(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function D(){return Object.create(null)}function E(t,e,n,o,r){for(var i in e)if(n[i]){var a=o[i],s=r[i],l=e[i];if(l)for(var c=0;c<l.length;c+=1){var u=l[c];u.__calling||(u.__calling=!0,u.call(t,a,s),u.__calling=!1)}}}var S={clearEntry:function(){this.set({entry:{dateFrom:(new Date).toISOString().substr(0,10),dateTo:(new Date).toISOString().substr(0,10),title:"",color:this.get("defaultColor"),content:""}})},submit:function(){var t=this.get("mode");"create"===t&&this.create(),"edit"===t&&this.update()},update:function(){var t=this.get("calendar"),e=this.get("entry");if(!e.id)return!1;var n=t.get("entries"),o=n.findIndex(function(t){return t.id===e.id});if(o<0)return!1;n.splice(o,1,e),t.set({entries:n}),this.clearEntry(),this.set({show:!1})},create:function(){var t=this.get("calendar"),e=this.get("entry"),n=t.get("entries");n.push(e),t.set({entries:n}),this.set({show:!1})},delete:function(t){var e=this.get("calendar");if(!t.id)return!1;var n=e.get("entries"),o=n.findIndex(function(e){return e.id===t.id});if(o<0)return!1;n.splice(o,1),e.set({entries:n}),this.clearEntry(),this.set({show:!1})}};return T(f.prototype,S,{destroy:F,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)},observe:function(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(T({},t)),this._root._lock||(this._root._lock=!0,C(this._root._beforecreate),C(this._root._oncreate),C(this._root._aftercreate),this._root._lock=!1)},teardown:F,_set:function(t){var e=this._state,n={},o=!1;for(var r in t)N(t[r],e[r])&&(n[r]=o=!0);o&&(this._state=T({},e,t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),E(this,this._observers.pre,n,this._state,e),this._fragment.p(n,this._state),E(this,this._observers.post,n,this._state,e))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment.u()}}),f.prototype._recompute=function(t,i){(t.entry||t.yearFrom)&&(N(i.fromYears,i.fromYears=e(i.entry,i.yearFrom))&&(t.fromYears=!0),N(i.toYears,i.toYears=n(i.entry,i.yearFrom))&&(t.toYears=!0)),(t.entry||t.yearFrom||t.monthFrom)&&N(i.fromDays,i.fromDays=o(i.entry,i.yearFrom,i.monthFrom))&&(t.fromDays=!0),(t.entry||t.yearTo||t.monthTo)&&N(i.toDays,i.toDays=r(i.entry,i.yearTo,i.monthTo))&&(t.toDays=!0)},f}();